(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),l=n(2),o=n.n(l),i=(n(13),n(3)),r=n(4),c=n(6),m=n(5),d=n(7),u=function(e){return s.a.createElement("div",{id:"savedpath"})},p=(n(15),[]),g=[],h=[],v=[],E=[],f=!0,w=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).db_path=function(){var e=document.getElementById("pathname");if(console.log(e.value),""!=e.value){document.getElementById("displaysave").innerHTML="",document.getElementById("savedpath").innerHTML=e.value,console.log("sending post request");var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4!=this.readyState)return;console.log("sending post request");var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState){console.log("sending post request");var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200!=this.status&&console.log("ERROR: State 4 of request")},t.open("POST","/name"),t.send(e.value),200!=this.status&&console.log("ERROR: State 4 of request")}},t.open("POST","/uploadcsv"),t.send(g),console.log(g),200!=this.status&&console.log("ERROR: State 4 of request")}},t.open("POST","/uploadgpx"),t.send(p),console.log(p),200!=this.status&&console.log("ERROR: State 4 of request")},t.open("POST","/clear",!0),t.send("delete")}else document.getElementById("displaysave").innerHTML="Give a name to the path."},n.upload_gpx=function(){h=[],p=[];var e=[],t="",n=document.getElementById("gpx").files[0],a=new FileReader;a.onload=function(){a.result;e.push(a.result)},a.readAsText(n),a.onloadend=function(){console.log(e),p=e,t=e[0],console.log(t);var n,a,s=t.split("</trkpt>"),l=/[0-9 +-]/,o={time:"sample",lon:"sample",lat:"sample"};for(n=0;n<s.length-1;n++){var i=s[n],r=i.indexOf("T");a=i.substring(r).search(l),o.time=i.substring(r+a,r+a+8);r=i.indexOf("lon");a=i.substring(r).search(l),o.lon=i.substring(r+a,r+a+10);r=i.indexOf("lat");a=i.substring(r).search(l),o.lat=i.substring(r+a,r+a+9),h.push({time:o.time,lon:o.lon,lat:o.lat})}console.log(h)},document.getElementById("submitgpx").innerHTML="<img src = 'check.png' width='15' height='15'>"},n.upload_csv=function(){v=[],g=[];var e=[],t="",n=document.getElementById("csv").files[0],a=new FileReader;a.onload=function(){a.result;e.push(a.result)},a.readAsText(n),a.onloadend=function(){console.log(e),g=e,t=e[0],console.log(t);var n,a=t.split("\r"),s={distance:"sample",time:"sample",strcount:"sample",rate:"sample",check:"sample",splspeed:"sample",speed:"sample",dispstr:"sample"},l=[];for(n=3;n<a.length-1;n++)l=a[n].split(","),s.distance=l[0],s.time=l[1],s.strcount=l[2],s.rate=l[3],s.check=l[4],s.splspeed=l[5],s.speed=l[6],s.dispstr=l[7],v.push({distance:s.distance,time:s.time,strcount:s.strcount,rate:s.rate,check:s.check,splspeed:s.splspeed,speed:s.speed,dispstr:s.dispstr});console.log(v)},document.getElementById("submitcsv").innerHTML="<img src = 'check.png' width='15' height='15'>"},n.displayPath=function(){var e,t,n,a,s,l;for(document.getElementById("submitcsv").innerHTML="",document.getElementById("submitgpx").innerHTML="",E=[],u=0;u<v.length;u++)e=v[u].time.slice(0,7),v[u].time=e;for(u=0;u<v.length;u++)n=v[u].time.slice(0,1),a=v[u].time.slice(2,4),s=v[u].time.slice(5,7),t=new Date("August 19, 2018 "+n+":"+a+":"+s),v[u].time=t.getHours().toString()+":"+t.getMinutes().toString()+":"+t.getSeconds().toString();var o,i,r,c=parseFloat(h[0].time.slice(0,2)),m=parseFloat(h[0].time.slice(3,5)),d=parseFloat(h[0].time.slice(6,8));for(u=0;u<h.length;u++)o=h[u].time.slice(0,2),i=h[u].time.slice(3,5),r=h[u].time.slice(6,8),(l=new Date("August 19, 2018 "+o+":"+i+":"+r)).setHours(l.getHours()-c),l.setMinutes(l.getMinutes()-m),l.setSeconds(l.getSeconds()-d),h[u].time=l.getHours().toString()+":"+l.getMinutes().toString()+":"+l.getSeconds().toString();var u,p,g,f,w=new window.google.maps.Polyline({strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:5}),y=w.getPath(),b=0,S=0,N=0,x=0;for(u=0;u<h.length;u++)for(g=new window.google.maps.LatLng({lat:parseFloat(h[u].lat),lng:parseFloat(h[u].lon)}),y.push(g),0==u&&(window.map.setCenter(g),window.map.setZoom(13)),p=0;p<v.length;p++)v[p].time==h[u].time&&(f=v[p].splspeed.slice(1,5)+" @ "+v[p].rate.slice(1,5),console.log(f),b+=60*parseFloat(v[p].splspeed.slice(1,5)[0])+parseFloat(v[p].splspeed.slice(1,5).slice(2,5)),S+=parseFloat(v[p].rate.slice(1,5)),N+=parseFloat(v[p].dispstr.slice(0,5)),E.push(new window.google.maps.InfoWindow({content:f,position:g,map:window.map})));w.strokeColor="darkblue",w.setMap(window.map),console.log(S),S=(S/v.length).toFixed(1),b/=v.length;var k=parseInt(b/60);b=60*parseFloat((b/60).toString().slice(1,3)),console.log((b/60).toString().slice(1,3)),console.log(k),console.log(b),b=k+b;var R=k.toString()+":"+b.toString();N=(N/v.length).toFixed(2),x=v[v.length-1].distance,document.getElementById("stats").innerHTML="<div className='hero'><div className = 'box'><li><ul>Average stroke rate (str/min): <strong>"+S.toString()+"</strong></ul><ul>Average Split (time/500m): <strong>"+R+"</strong></ul><ul>Average Distance per Stroke (m): <strong>"+N.toString()+"</strong></ul><ul>Total Distance (m): <strong>"+x.toString()+"</strong></ul></li></div></div>"},n.toggleInfoWindows=function(){if(void 0!==v&&0!=v.length)if(0==f){f=!0;for(var e=0;e<E.length;e++)E[e].open(window.map)}else if(1==f){f=!1;for(e=0;e<E.length;e++)E[e].close()}},n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"content is-large has-text-centered"},s.a.createElement("p",null,s.a.createElement("div",{className:"container is-widescreen"},s.a.createElement("div",{className:"hero"},s.a.createElement("div",{className:"box"},s.a.createElement("h1",null,"Practice Evaluator"),s.a.createElement("h6",{className:"content is-medium"},s.a.createElement("i",null,"WPI Mens Rowing")))))),s.a.createElement("p",null,s.a.createElement("div",{className:"container is-widescreen"},s.a.createElement("div",{id:"stats"}))),s.a.createElement("p",null,s.a.createElement("div",{className:"container is-widescreen"},s.a.createElement("div",{className:"hero"},s.a.createElement("div",{className:"box"},s.a.createElement("h3",null,"Add GPX file"),s.a.createElement("p",{className:"content is-small"},s.a.createElement("form",null,s.a.createElement("input",{className:"content",type:"file",id:"gpx"}))),s.a.createElement("p",{className:"field"},s.a.createElement("button",{className:"button is-primary",onClick:this.upload_gpx},"Submit"),s.a.createElement("p",{className:"content"},s.a.createElement("div",{id:"submitgpx"}))),s.a.createElement("h3",null,"Add CSV file"),s.a.createElement("p",{className:"content is-small"},s.a.createElement("form",null,s.a.createElement("input",{className:"content",type:"file",id:"csv"}))),s.a.createElement("p",{className:"field"},s.a.createElement("button",{className:"button is-primary",onClick:this.upload_csv},"Submit"),s.a.createElement("p",{className:"content"},s.a.createElement("div",{id:"submitcsv"}))))))),s.a.createElement("p",null,s.a.createElement("div",{className:"container is-widescreen"},s.a.createElement("div",{className:"hero"},s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"field is-group"},s.a.createElement("p",null,s.a.createElement("button",{className:"button is-success is-large",onClick:this.displayPath},"Draw Path")),s.a.createElement("p",null,s.a.createElement("button",{className:"button is-link",onClick:this.toggleInfoWindows},"Toggle Splits"))))))),s.a.createElement("p",null,s.a.createElement("div",{className:"container is-widescreen"},s.a.createElement("div",{className:"hero"},s.a.createElement("div",{className:"box"},s.a.createElement("form",null,s.a.createElement("input",{type:"text",id:"pathname"})),s.a.createElement("div",{id:"displaysave"}),s.a.createElement("button",{className:"button is-primary",onClick:this.db_path,id:"save"},"Save This Path"))))),s.a.createElement("p",null,s.a.createElement("div",{className:"container is-widescreen"},s.a.createElement("div",{className:"hero"},s.a.createElement("div",{className:"box"},s.a.createElement("h2",null,"Saved Path"),s.a.createElement(u,null))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(w,null),document.getElementById("root")),window.onload=function(){var e="",t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState?(console.log(this.responseText),"[]"!=this.responseText&&(e=this.responseText,document.getElementById("savedpath").innerHTML=e.split('"')[5]),200!=this.status&&console.log("ERROR: State 4 of request")):console.log(this.readyState)},t.open("GET","/name",!0),t.send()},"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(17)}},[[8,2,1]]]);
//# sourceMappingURL=main.ea6e2a20.chunk.js.map